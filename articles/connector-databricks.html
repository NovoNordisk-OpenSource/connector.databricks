<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started with connector.databricks • connector.databricks</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with connector.databricks">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">connector.databricks</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/connector-databricks.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Consistent-API.html">Understanding Connector Package Methods</a></li>
    <li><a class="dropdown-item" href="../articles/read_write.html">Reading and Writing Databricks Tables</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/novonordisk-opensource/connector.databricks/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Getting started with connector.databricks</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/novonordisk-opensource/connector.databricks/blob/main/vignettes/connector-databricks.Rmd" class="external-link"><code>vignettes/connector-databricks.Rmd</code></a></small>
      <div class="d-none name"><code>connector-databricks.Rmd</code></div>
    </div>

    
    
<p>The connector.databricks package provides a convenient interface for
accessing and interacting with Databricks tables and volumes directly
from R.</p>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette will guide you through the process of connecting to a
Databricks, retrieving data, and performing various operations using
this package.</p>
</div>
<div class="section level2">
<h2 id="connecting-to-a-databricks">Connecting to a Databricks<a class="anchor" aria-label="anchor" href="#connecting-to-a-databricks"></a>
</h2>
<div class="section level3">
<h3 id="without-connector-package">Without connector package<a class="anchor" aria-label="anchor" href="#without-connector-package"></a>
</h3>
<p>To get started, you need to establish a connection to your Databricks
cluster or volume storage. Use:</p>
<ul>
<li>
<code><a href="../reference/connector_databricks_table.html">connector_databricks_table()</a></code> function to authenticate
and connect to your Databricks cluster</li>
<li>
<code><a href="../reference/connector_databricks_volume.html">connector_databricks_volume()</a></code> function to connect to
your Databricks volume storage</li>
</ul>
<p>Here’s an example of how to do this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://novonordisk-opensource.github.io/connector.databricks">connector.databricks</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to databricks tables using DBI</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connector_databricks_table.html">connector_databricks_table</a></span><span class="op">(</span></span>
<span>  http_path <span class="op">=</span> <span class="st">"path-to-cluster"</span>,</span>
<span>  catalog <span class="op">=</span> <span class="st">"my_catalog"</span>,</span>
<span>  schema <span class="op">=</span> <span class="st">"my_schema"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to databricks volume</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/connector_databricks_volume.html">connector_databricks_volume</a></span><span class="op">(</span></span>
<span>  catalog <span class="op">=</span> <span class="st">"my_catalog"</span>,</span>
<span>  schema <span class="op">=</span> <span class="st">"my_schema"</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"path-to-file-storage"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="with-connector-package-recommended">With connector package (recommended)<a class="anchor" aria-label="anchor" href="#with-connector-package-recommended"></a>
</h3>
<p>If you are using the connector package, you can connect to a
Databricks datasources using the <code><a href="https://novonordisk-opensource.github.io/connector/reference/connect.html" class="external-link">connect()</a></code> function. This
function based on a configuration file or a list creates a
<code><a href="https://novonordisk-opensource.github.io/connector/reference/connectors.html" class="external-link">connectors()</a></code> object with a <code>connector</code>for each
of the specified datasources (for detailed explanation have a look at
the <code>connector</code> package).</p>
<p>Configuration file for connecting to Databricks should look like
this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># nolint start</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">metadata</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">  </span><span class="fu">catalog</span><span class="kw">:</span><span class="at">  </span><span class="st">"databricks_calatog"</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">  </span><span class="fu">http_path</span><span class="kw">:</span><span class="at"> </span><span class="st">"path-to-cluster"</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">  </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"path-to-file-storage"</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">  </span><span class="fu">project</span><span class="kw">:</span><span class="at"> </span><span class="st">"project_name"</span></span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a><span class="at">  </span><span class="fu">trial</span><span class="kw">:</span><span class="at"> </span><span class="st">"trial_name"</span></span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="fu">datasources</span><span class="kw">:</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"tables"</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a><span class="at">    </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> </span><span class="st">"connector.databricks::connector_databricks_table"</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a><span class="at">      </span><span class="fu">http_path</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.http_path}"</span></span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a><span class="at">      </span><span class="fu">catalog</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.catalog}"</span></span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a><span class="at">      </span><span class="fu">schema</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.project}_{metadata.trial}_adam"</span></span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"volume"</span></span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a><span class="at">    </span><span class="fu">backend</span><span class="kw">:</span></span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a><span class="at">      </span><span class="fu">type</span><span class="kw">:</span><span class="at"> </span><span class="st">"connector.databricks::connector_databricks_volume"</span></span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.path}"</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a><span class="at">      </span><span class="fu">catalog</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.catalog}"</span></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="at">      </span><span class="fu">schema</span><span class="kw">:</span><span class="at"> </span><span class="st">"{metadata.project}_{metadata.trial}_tfl"</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a><span class="co"># nolint end</span></span></code></pre></div>
<p>Save this to <code>_connector.yml</code> file and use the
<code><a href="https://novonordisk-opensource.github.io/connector/reference/connect.html" class="external-link">connect()</a></code> function to connect to Databricks:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://novonordisk-opensource.github.io/connector/" class="external-link">connector</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create connector object</span></span>
<span><span class="va">db</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://novonordisk-opensource.github.io/connector/reference/connect.html" class="external-link">connect</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Now you can access the Databricks cluster and volume using the
<code>db</code> object and <code>tables</code> or <code>volume</code>
field, respectively.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Connection to Databricks cluster. This will print object details</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span></span>
<span></span>
<span><span class="co"># Connection to Databricks cluster. This will print object details</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span></span></code></pre></div>
<p>After the setup is done we can use these connections to manipulate
Databricks data.</p>
</div>
</div>
<div class="section level2">
<h2 id="listing-data">Listing data<a class="anchor" aria-label="anchor" href="#listing-data"></a>
</h2>
<p>You can do some basic directory operations, such as creating,
removing, and listing data inside directory, or listing tables inside
database.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a directory</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/create_directory_cnt.html">create_directory_cnt</a></span><span class="op">(</span><span class="st">"new_directory"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove a directory</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/remove_directory_cnt.html">remove_directory_cnt</a></span><span class="op">(</span><span class="st">"new_directory"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List content inside volume directory</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/list_content_cnt.html">list_content_cnt</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List tables inside database</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/list_content_cnt.html">list_content_cnt</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reading-and-writing-data">Reading and writing data<a class="anchor" aria-label="anchor" href="#reading-and-writing-data"></a>
</h2>
<p>The <code>connector</code> packages provide a set of functions to
read and write data from/to the datasources. They all have similar
interface, so it’s easy to switch between them.</p>
<p>Now, we will show how to read and write different types of data
from/to Databricks. In these examples we will be using <code>iris</code>
and <code>mtcars</code> datasets.</p>
<p>Here is an example of writing data to a table on a cluster:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Manipulate data</span></span>
<span></span>
<span><span class="co">## Iris data</span></span>
<span><span class="va">setosa</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Species</span> <span class="op">==</span> <span class="st">"setosa"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mean_for_all_iris</span> <span class="op">&lt;-</span> <span class="va">iris</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Species</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html" class="external-link">summarise_all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">mean</span>, <span class="va">median</span>, <span class="va">sd</span>, <span class="va">min</span>, <span class="va">max</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Mtcars data</span></span>
<span><span class="va">cars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">mpg</span> <span class="op">&gt;</span> <span class="fl">22</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mean_for_all_mtcars</span> <span class="op">&lt;-</span> <span class="va">mtcars</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">gear</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html" class="external-link">everything</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      <span class="st">"mean"</span> <span class="op">=</span> <span class="va">mean</span>,</span>
<span>      <span class="st">"median"</span> <span class="op">=</span> <span class="va">median</span>,</span>
<span>      <span class="st">"sd"</span> <span class="op">=</span> <span class="va">sd</span>,</span>
<span>      <span class="st">"min"</span> <span class="op">=</span> <span class="va">min</span>,</span>
<span>      <span class="st">"max"</span> <span class="op">=</span> <span class="va">max</span></span>
<span>    <span class="op">)</span>,</span>
<span>    .names <span class="op">=</span> <span class="st">"{.col}_{.fn}"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="op">-</span><span class="va">gear</span>,</span>
<span>    names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".value"</span>, <span class="st">"stat"</span><span class="op">)</span>,</span>
<span>    names_sep <span class="op">=</span> <span class="st">"_"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## Store data</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">setosa</span>, <span class="st">"setosa"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">mean_for_all_iris</span>, <span class="st">"mean_iris"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">cars</span>, <span class="st">"cars_mpg"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">mean_for_all_mtcars</span>, <span class="st">"mean_mtcars"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now, let’s read the data back manipulate it a bit and write it to the
Databricks volume. This way we can save different types of data in
different formats.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://gt.rstudio.com" class="external-link">gt</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List and load data from cluster</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/list_content_cnt.html">list_content_cnt</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">table</span> <span class="op">&lt;-</span> <span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/read_cnt.html">read_cnt</a></span><span class="op">(</span><span class="st">"mean_mtcars"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gttable</span> <span class="op">&lt;-</span> <span class="va">table</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">gt</span><span class="op">(</span>groupname_col <span class="op">=</span> <span class="st">"gear"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Save nontabular data to databricks volume</span></span>
<span><span class="va">tmp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".docx"</span><span class="op">)</span></span>
<span><span class="fu">gtsave</span><span class="op">(</span><span class="va">gttable</span>, <span class="va">tmp_file</span><span class="op">)</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/upload_cnt.html">upload_cnt</a></span><span class="op">(</span><span class="va">tmp_file</span>, <span class="st">"tmeanallmtcars.docx"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Manipulate data</span></span>
<span><span class="va">setosa_fsetosa</span> <span class="op">&lt;-</span> <span class="va">db</span><span class="op">$</span><span class="va">tables</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/read_cnt.html">read_cnt</a></span><span class="op">(</span><span class="st">"setosa"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Sepal.Length</span> <span class="op">&gt;</span> <span class="fl">5</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fsetosa</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span><span class="va">setosa</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">Sepal.Length</span>, y <span class="op">=</span> <span class="va">Sepal.Width</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Store data into output location</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">fsetosa</span><span class="op">$</span><span class="va">data</span>, <span class="st">"fsetosa.csv"</span><span class="op">)</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/write_cnt.html">write_cnt</a></span><span class="op">(</span><span class="va">fsetosa</span>, <span class="st">"fsetosa.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">tmp_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span>fileext <span class="op">=</span> <span class="st">".png"</span><span class="op">)</span></span>
<span><span class="fu">ggsave</span><span class="op">(</span><span class="va">tmp_file</span>, <span class="va">fsetosa</span><span class="op">)</span></span>
<span><span class="va">db</span><span class="op">$</span><span class="va">volume</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/upload_cnt.html">upload_cnt</a></span><span class="op">(</span><span class="va">tmp_file</span>, <span class="st">"fsetosa.png"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>In this vignette we showed how to connect to Databricks datasources,
read and write data from them. We also showed how to use the connector
package to connect to Databricks and how to manipulate data using the
connector package.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffen Falgreen Larsen, Aksel Thomsen, Vladimir Obucina, Cervan Girard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
