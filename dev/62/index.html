<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Expansion of the connector package for enabling connections to databricks • connector.databricks</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Expansion of the connector package for enabling connections to databricks">
<meta name="description" content="Expands the connector package to handle databricks. This includes reading and writing of files to volumes as well as connections to sparklyr.">
<meta property="og:description" content="Expands the connector package to handle databricks. This includes reading and writing of files to volumes as well as connections to sparklyr.">
<meta property="og:image" content="https://novonordisk-opensource.github.io/connector.databricks/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">connector.databricks</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/connector-databricks.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/novonordisk-opensource/connector.databricks/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="connectordatabricks-">connector.databricks 
<a class="anchor" aria-label="anchor" href="#connectordatabricks-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The connector.databricks package provides a convenient interface for accessing and interacting with Databricks volumes and tables directly from R. This vignette will guide you through the process of connecting to databricks, retrieving data, and performing various operations using this package.</p>
<p>This package is meant to be used with {connector} package, which provides a common interface for interacting with various data sources. The connector.databricks package extends the connector package to support Databricks <strong>volumes</strong> and <strong>tables</strong>.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the connector.databricks package using the following command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"connector.databricks"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Alternatively, you can install the development version from GitHub:</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"novonordisk-opensource/connector.databricks"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>Package is meant to be used alongside connector package, but it can be used independently as well. Here is an example of how to connect to databricks and retrieve data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://novonordisk-opensource.github.io/connector.databricks">connector.databricks</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to databricks tables using DBI</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/connector_databricks_table.html">connector_databricks_table</a></span><span class="op">(</span></span>
<span>  http_path <span class="op">=</span> <span class="st">"path-to-cluster"</span>,</span>
<span>  catalog <span class="op">=</span> <span class="st">"my_catalog"</span>,</span>
<span>  schema <span class="op">=</span> <span class="st">"my_schema"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to databricks volume</span></span>
<span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/connector_databricks_volume.html">connector_databricks_volume</a></span><span class="op">(</span></span>
<span>  catalog <span class="op">=</span> <span class="st">"my_catalog"</span>,</span>
<span>  schema <span class="op">=</span> <span class="st">"my_schema"</span>,</span>
<span>  path <span class="op">=</span> <span class="st">"path-to-file-storage"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>When connecting to <strong>Databricks tables</strong>, authentication to databricks is handled by the <code><a href="https://odbc.r-dbi.org/reference/databricks.html" class="external-link">odbc::databricks()</a></code> driver and supports general use of personal access tokens and credentials through Posit Workbench. See also <code><a href="https://odbc.r-dbi.org/reference/databricks.html" class="external-link">odbc::databricks()</a></code> On more information on how the connection to Databricks is established.</p>
<p>When connecting to <strong>Databricks volumes</strong>, authentication is handled using <code>DatabricksClient()</code> function, whenever a call to the API is made. Environments should have configurations available via the environment variable <code>DATABRICKS_CONFIG_FILE</code> or located at <code>~/.databrickscfg</code> in order for this to work. For more info have a look at the function documentation.</p>
<p>Both types of connections share similar interfaces for reading and writing data. Tables should be used with tabular types of data, while volumes should be used with unstructured data.</p>
<p>Example of how to use the connector object:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List content</span></span>
<span><span class="va">con</span><span class="op">$</span><span class="fu">list_content_cnt</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write a file</span></span>
<span><span class="va">con</span><span class="op">$</span><span class="fu">write_cnt</span><span class="op">(</span><span class="va">iris</span>, <span class="st">"iris.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read a file</span></span>
<span><span class="va">con</span><span class="op">$</span><span class="fu">read_cnt</span><span class="op">(</span><span class="st">"iris.rds"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove a file</span></span>
<span><span class="va">con</span><span class="op">$</span><span class="fu">remove_cnt</span><span class="op">(</span><span class="st">"file_name.csv"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage-with-connector-package">Usage with connector package<a class="anchor" aria-label="anchor" href="#usage-with-connector-package"></a>
</h2>
<p>Here is an example how it can be used with connector package and configuration YAML file (for more information take a look at the connector package):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Connect using configuration file</span></span>
<span><span class="va">connector</span> <span class="op">&lt;-</span> <span class="fu">connector</span><span class="fu">::</span><span class="fu"><a href="https://novonordisk-opensource.github.io/connector/reference/connect.html" class="external-link">connect</a></span><span class="op">(</span></span>
<span>  config <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span></span>
<span>    <span class="st">"config"</span>,</span>
<span>    <span class="st">"example_yaml.yaml"</span>,</span>
<span>    package <span class="op">=</span> <span class="st">"connector.databricks"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># List contents in Volume</span></span>
<span><span class="va">connector</span><span class="op">$</span><span class="va">volumes</span><span class="op">$</span><span class="fu">list_content_cnt</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get databricks connection object from Tables</span></span>
<span><span class="va">connector</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="fu">get_conn</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Write a file</span></span>
<span><span class="va">connector</span><span class="op">$</span><span class="va">volumes</span><span class="op">$</span><span class="fu">write_cnt</span><span class="op">(</span><span class="va">iris</span>, <span class="st">"Test/iris.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Read a file</span></span>
<span><span class="va">connector</span><span class="op">$</span><span class="va">tables</span><span class="op">$</span><span class="fu">read_cnt</span><span class="op">(</span><span class="st">"example_data"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>We welcome contributions to the connector.databricks package. If you have any suggestions or find any issues, please open an issue or submit a pull request on GitHub.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>This package is licensed under the Apache License.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/novonordisk-opensource/connector.databricks/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing connector.databricks</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Steffen Falgreen Larsen <br><small class="roles"> Author, maintainer </small>   </li>
<li>Aksel Thomsen <br><small class="roles"> Author </small>   </li>
<li>Vladimir Obucina <br><small class="roles"> Author </small>   </li>
<li>Cervan Girard <br><small class="roles"> Author </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/novonordisk-opensource/connector.databricks/actions/workflows/check_and_co.yaml" class="external-link"><img src="https://github.com/novonordisk-opensource/connector.databricks/actions/workflows/check_and_co.yaml/badge.svg" alt="Checks"></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steffen Falgreen Larsen, Aksel Thomsen, Vladimir Obucina, Cervan Girard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
